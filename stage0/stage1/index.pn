
fs = require "fs"
util = require "util"

lex = require "./parser/lex.js"
parse = require "./parser/parse.js"
cjs = require "./compiler/cjs.js"


main = args -> {
    filename = args 2
    src = String (fs "readFileSync" filename)
    tokens = lex src
    ast = parse tokens
    js = cjs ast
    outfile = filename "replace" of ".pn" ".js"
    fs "writeFileSync" of outfile js
}

main (process "argv")
